import{a as q,b as B,c as W,d as z,e as Y,f as G,g as H,h as J,i as K,j as X,k as v,l as Z,m as $,q as ee}from"./chunk-2DS63WET.js";import{$ as m,Ba as L,Da as O,L as s,Na as D,Oa as j,Q as f,S as N,Sa as R,X as b,a as U,b as A,da as n,ea as i,fa as x,ha as M,ia as g,ja as E,ma as w,n as F,na as S,oa as y,pa as T,qa as o,ra as h,sa as C,ta as P,ua as k,va as I,x as d,xa as V,xb as Q,y as p}from"./chunk-AJJLOLIR.js";import"./chunk-TSRGIXR5.js";var _=class{_id;audioUrl="";transcription="";source="mock";is_active=1};var ne=["transcriptionForm"],re=["showAddEdittranscriptionModal"],oe=["deletetranscriptionModal"],te=()=>({backdrop:"static",keyboard:!1,animated:!0});function ae(l,t){if(l&1){let r=M();n(0,"tr",38)(1,"th",39),o(2),i(),n(3,"td",38),o(4),i(),n(5,"td",38),o(6),i(),n(7,"td",38),o(8),i(),n(9,"td",38),o(10),L(11,"date"),i(),n(12,"td",40)(13,"button",41),g("click",function(){let a=d(r).$implicit,c=E();return p(c.confirmDelete(a))}),x(14,"i",42),i()()()}if(l&2){let r=t.$implicit,e=t.index;s(2),h(e+1),s(2),h(r.audioUrl),s(2),h(r.transcription),s(2),h(r.source),s(2),C(" ",O(11,5,r.createdAt,"MM/dd/YYYY")," ")}}function se(l,t){l&1&&(n(0,"div",43),o(1," No Transcription Found. "),i())}function le(l,t){l&1&&(n(0,"div"),o(1," Audio URL is required. "),i())}function ce(l,t){l&1&&(n(0,"div"),o(1," Please enter a valid URL (must start with http:// or https://). "),i())}function de(l,t){if(l&1&&(n(0,"div",44),b(1,le,2,0,"div",45)(2,ce,2,0,"div",45),i()),l&2){E();let r=T(61);s(),m("ngIf",r.errors==null?null:r.errors.required),s(),m("ngIf",r.errors==null?null:r.errors.pattern)}}var ie=class l{constructor(t,r,e,a){this.spinner=t;this.transcriptionService=r;this.toastr=e;this.globalService=a}transcriptionList=[];newTranscription=new _;confirmDeleteId=null;imageSrc="assets/img/brand/avatar.png";selectedFiles={imageInfo:[],imageUrl:""};imageError="";isImage=!1;searchTranscription="";currentPage=1;itemsPerPage=10;totalItems=0;searchSubject=new A;subscriptions=new U;transcriptionFormRef;showAddEdittranscriptionModal=v;deletetranscriptionModal=v;transcriptions;ngOnInit(){this.fetchTranscriptions();let t=this.searchSubject.pipe(F(500)).subscribe(r=>{this.searchTranscription=r.trim(),this.fetchTranscriptions()});this.transcriptions.add(t)}onSearchChange(t){this.searchSubject.next(t)}onPageChange(t){this.currentPage=t.page,this.fetchTranscriptions()}onItemsPerPageChange(){this.currentPage=1,this.fetchTranscriptions()}fetchTranscriptions(){let t={searchTranscriptionValue:this.searchTranscription,page:this.currentPage,limit:this.itemsPerPage};console.log("params",t),this.transcriptionService.getAllTranscription(t).subscribe({next:r=>{console.log("res===================",r),r.status==200?(this.transcriptionList=r?.data.items||[],this.totalItems=r.data.total||0,this.spinner.hide()):this.transcriptionList=[]},error:r=>{console.error("Error fetching transcriptions:",r),this.spinner.hide()}})}addEdittranscription(t){t?this.newTranscription=t:this.newTranscription=new _,this.showAddEdittranscriptionModal.show()}showConfirmPopup(t){this.newTranscription=t,this.deletetranscriptionModal.show()}closeConfirmPopup(){this.confirmDeleteId=null}confirmDelete(t){this.newTranscription=t,this.deletetranscriptionModal.show()}deleteTranscription(){this.spinner.show(),this.transcriptionService.deleteTranscription({_id:this.newTranscription._id}).subscribe({next:t=>{t.status===200?this.toastr.success(t.message,"Success!"):this.toastr.error(t.message,"Error!"),this.fetchTranscriptions(),this.closeModel()},error:t=>{this.toastr.error("Something went wrong. Please try again."),this.spinner.hide()}})}saveupdateTranscription(t){let r=t||this.newTranscription;if(!t&&this.transcriptionFormRef.invalid){Object.values(this.transcriptionFormRef.controls).forEach(e=>e.markAsTouched());return}this.transcriptionService.saveTranscription(r).subscribe({next:e=>{e.status===200?this.toastr.success(e.message,"Success!"):this.toastr.error(e.message,"Error!"),this.fetchTranscriptions(),this.closeModel()},error:e=>{this.toastr.error(e,"Error!")}})}closeModel(){this.showAddEdittranscriptionModal.hide(),this.deletetranscriptionModal.hide()}ngOnDestroy(){this.transcriptions.unsubscribe()}static \u0275fac=function(r){return new(r||l)(f(X),f(ee),f(Q),f(q))};static \u0275cmp=N({type:l,selectors:[["app-transcription"]],viewQuery:function(r,e){if(r&1&&(w(ne,5),w(re,5),w(oe,5)),r&2){let a;S(a=y())&&(e.transcriptionFormRef=a.first),S(a=y())&&(e.showAddEdittranscriptionModal=a.first),S(a=y())&&(e.deletetranscriptionModal=a.first)}},decls:67,vars:17,consts:[["deletetranscriptionModal","bs-modal"],["showAddEdittranscriptionModal","bs-modal"],["transcriptionForm","ngForm"],["audioUrlCtrl","ngModel"],[1,"d-flex","justify-content-between","align-items-center","mb-3","bg-white","p-3","rounded","shadow-sm"],[1,"mb-0","fw-bold"],["type","button","data-bs-toggle","modal",1,"btn","dashboard-button-bg","text-nowrap","pull-right",3,"click"],[1,"fa","fa-plus"],[1,"bg-white",2,"min-height","450px"],[1,"table"],["scope","col"],["class","align-middle",4,"ngFor","ngForOf"],["class","alert alert-info alert-posstion",4,"ngIf"],["previousText","\xAB","nextText","\xBB","firstText","First","lastText","Last",1,"custom-pagination",3,"ngModelChange","pageChanged","totalItems","ngModel","itemsPerPage","maxSize","boundaryLinks"],["bsModal","","tabindex","-1","role","dialog","aria-labelledby","myModalLabel","aria-hidden","true",1,"modal","fade","remove-modal-bg",3,"config"],[1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title","text-center","fw-bold"],["type","button","data-bs-dismiss","modal",1,"fa","fa-remove","close-modal","position-absolute","top-0","end-0","m-3","fs-5","cursor-pointer",3,"click"],[1,"modal-body","text-center"],[1,"text-danger"],[1,"modal-footer"],["type","button",1,"btn","dashboard-button-bg",3,"click"],["role","document",1,"modal-dialog","modal-md"],[1,"modal-content","p-4"],[1,"modal-header","pt-0"],[1,"modal-body","pb-0"],["novalidate",""],[1,"row"],[1,"col-md-12"],[1,"mb-3"],["for","audioUrl",1,"form-label"],["type","url","id","audioUrl","name","audioUrl","placeholder","Please enter audio URL","required","","pattern","https?://.+",1,"form-control",3,"ngModelChange","ngModel"],["class","text-danger small",4,"ngIf"],[1,"modal-footer","pb-0"],[1,"fa","fa-remove","closeModel","close-modal","position-absolute","top-0","end-0","m-3","fs-5","cursor-pointer",3,"click"],["type","button",1,"btn","dashboard-button-bg",3,"click","disabled"],[1,"align-middle"],["scope","row"],[1,"align-middle",2,"width","100px"],[1,"btn","me-2","btn-sm","view-button",3,"click"],[1,"bi","bi-trash"],[1,"alert","alert-info","alert-posstion"],[1,"text-danger","small"],[4,"ngIf"]],template:function(r,e){if(r&1){let a=M();n(0,"div",4)(1,"h4",5),o(2,"Transcriptions"),i(),n(3,"button",6),g("click",function(){return d(a),p(e.addEdittranscription())}),x(4,"i",7),o(5," Add new transcription "),i()(),n(6,"div",8)(7,"table",9)(8,"thead")(9,"tr")(10,"th",10),o(11,"Sr. No"),i(),n(12,"th",10),o(13,"Audio Url"),i(),n(14,"th",10),o(15,"transcription"),i(),n(16,"th",10),o(17,"Source"),i(),n(18,"th",10),o(19,"Created"),i(),n(20,"th",10),o(21,"Action"),i()()(),n(22,"tbody"),b(23,ae,15,8,"tr",11),i()(),b(24,se,2,0,"div",12),i(),n(25,"pagination",13),I("ngModelChange",function(u){return d(a),k(e.currentPage,u)||(e.currentPage=u),p(u)}),g("pageChanged",function(u){return d(a),p(e.onPageChange(u))}),i(),n(26,"div",14,0)(28,"div",15)(29,"div",16)(30,"div",17)(31,"h3",18),o(32,"Confirm Delete"),i(),n(33,"span",19),g("click",function(){return d(a),p(e.closeModel())}),i()(),n(34,"div",20)(35,"b"),o(36,"Are you sure you want to delete this "),n(37,"span",21),o(38),i(),o(39," transcription?"),i()(),n(40,"div",22)(41,"button",23),g("click",function(){return d(a),p(e.closeModel())}),o(42," No "),i(),n(43,"button",23),g("click",function(){return d(a),p(e.deleteTranscription())}),o(44," Yes "),i()()()()(),n(45,"div",14,1)(47,"div",24)(48,"div",25)(49,"div",26)(50,"h3",18),o(51),i()(),n(52,"div",27)(53,"form",28,2)(55,"div",29)(56,"div",30)(57,"div",31)(58,"label",32),o(59,"Audio URL"),i(),n(60,"input",33,3),I("ngModelChange",function(u){return d(a),k(e.newTranscription.audioUrl,u)||(e.newTranscription.audioUrl=u),p(u)}),i(),b(62,de,3,2,"div",34),i()()()()(),n(63,"div",35)(64,"span",36),g("click",function(){return d(a),p(e.closeModel())}),i(),n(65,"button",37),g("click",function(){return d(a),p(e.saveupdateTranscription())}),o(66),i()()()()()}if(r&2){let a=T(54),c=T(61);s(23),m("ngForOf",e.transcriptionList),s(),m("ngIf",e.transcriptionList.length===0),s(),m("totalItems",e.totalItems),P("ngModel",e.currentPage),m("itemsPerPage",e.itemsPerPage)("maxSize",5)("boundaryLinks",!0),s(),m("config",V(15,te)),s(12),h(e.newTranscription.audioUrl),s(7),m("config",V(16,te)),s(6),C(" ",e.newTranscription._id?"Edit":"Add"," Audio Url "),s(9),P("ngModel",e.newTranscription.audioUrl),s(2),m("ngIf",c.invalid&&c.touched),s(3),m("disabled",a.invalid),s(),C(" ",e.newTranscription._id?"Update":"Save"," Audio Url ")}},dependencies:[$,D,j,H,B,W,z,J,K,G,Y,v,Z,R],styles:[".view-button[_ngcontent-%COMP%]{background-color:#1a3146;color:#fff}.toggle-icon[_ngcontent-%COMP%]{transition:all .3s ease}.custom-toggle[_ngcontent-%COMP%]{width:60px;height:25px;background-color:#1a3146;border-radius:50px;display:flex;align-items:center;justify-content:space-between;padding:0 8px;cursor:pointer;transition:all .3s ease;position:relative;color:#fff;font-weight:700;font-size:14px}.custom-toggle.active[_ngcontent-%COMP%]{background-color:#1a3146}.custom-toggle.active[_ngcontent-%COMP%]{justify-content:end}.toggle-label[_ngcontent-%COMP%]{z-index:1}.toggle-knob[_ngcontent-%COMP%]{width:15px;height:15px;background-color:#fff;border-radius:50%;position:absolute;right:5px;transition:right .3s ease}.custom-toggle.active[_ngcontent-%COMP%]   .toggle-knob[_ngcontent-%COMP%]{right:40px}"]})};export{ie as transcriptionComponent};
