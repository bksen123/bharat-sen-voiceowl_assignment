<div class="container event-detail-page py-4 pt-5">
  <!-- Header with back navigation -->
  <header class="mb-4" style="padding-top: 100px;">
    <a routerLink="/events" class="back-link text-decoration-none">
      <strong><b><i class="bi bi-arrow-left"></i></b> Back to Events</strong>
    </a>
  </header>
  <!-- Event header section -->
  <div class="event-header mb-4">
    <div class="d-flex justify-content-between align-items-start mb-3">
      <div>
        <h1 class="event-title mb-2">{{event?.name}}</h1>
        <div class="event-meta d-flex flex-wrap gap-3">
          <div class="event-category badge view-event-button mb-2">{{event?.event_type}}</div>
          <div class="date-time">
            <i class="fa fa-calendar me-2"></i>
            <ng-container *ngIf="event.from_event_date && event.to_event_date">
              <span *ngIf="isSameDate(event); else range">
                {{ event.from_event_date | date: 'fullDate' }}
              </span>
              <ng-template #range>
                {{ event.from_event_date | date: 'longDate' }} to {{ event.to_event_date | date: 'longDate' }}
              </ng-template>
            </ng-container>
          </div>
          <div class="location">
            <i class="fa fa-map-marker me-2"></i>
            {{event.location}}
          </div>
          <div class="mode">
            <i class="fa fa-globe me-2"></i>
            Event Mode: {{event.mode}}
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Event banner image -->
  <div class="event-banner mb-4">
    <img [src]="event.event_banner" [alt]="event.name" class="img-fluid rounded-3 shadow">
  </div>

  <!-- Event details -->
  <div class="row">
    <div class="col-lg-8">
      <article class="event-content">
        <h2 class="mb-3">About This Event</h2>
        <p class="lead">{{event.description}}</p>
        <div class="event-details-card card border-0 shadow-sm p-4 mb-4">
          <h3 class="h5 mb-3">Event Details</h3>
          <ul class="list-unstyled">
            <li class="mb-2">
              <strong><i class="fas fa-clock me-2"></i>Time:</strong>
              <!-- {{event.start_time}} to {{event.end_time}} -->
              {{ event.start_time.slice(0, 5) }} - {{ event.end_time.slice(0, 5) }}

            </li>
            <!-- <li class="mb-2">
              <strong><i class="fas fa-users me-2"></i>Attendees:</strong>
              {{event.total_member}} joined
            </li> -->
            <li *ngIf="event.meeting_link" class="mb-2">
              <strong><i class="fas fa-video me-2"></i>Meeting Link:</strong>
              <a [href]="event.meeting_link" target="_blank" class="text-decoration-none">
                Join Virtual Event
              </a>
            </li>
          </ul>
        </div>
      </article>
    </div>
    <div class="col-lg-4">
      <div class="event-sidebar card border-0 shadow-sm p-4">
        <h3 class="h5 mb-3">Quick Info</h3>
        <div class="d-grid gap-2">
          @if (event.event_id) {
          <button class="btn view-event-button" (click)="joinEvent(event)">
            <i class="fa fa-thumbs-up"></i> Joined Event
          </button>
          } @else {
          <button class="btn view-event-button" [disabled]="event?.total_member === event?.total_joined"
            (click)="joinEvent(event)">
            <i class="bi bi-person-plus-fill"></i> Join Event
          </button>
          }
          <button class="btn view-event-button">
            <i class="fas fa-calendar-plus me-2"></i>Add to Calendar
          </button>
          <!-- <button class="btn btn-outline-secondary">
            <i class="fas fa-share-alt me-2"></i>Share Event
          </button> -->
        </div>
        <div class="mt-4">
          <h4 class="h6 mb-3">Organizer</h4>
          <div class="d-flex align-items-center">
            <img src="assets/images/group.png" alt="Organizer" class="rounded-circle me-3" width="80">
            <div>
              <div class="fw-bold">Total Seats: {{event?.total_member}}</div>
              <div class="fw-bold">Total Joined: {{event?.total_joined}}</div>
              <small class="theme-text-secondary">Remaining Seats: {{event.total_member-event?.total_joined}}</small>
            </div>
          </div>
        </div>
        <div class="mt-3 d-flex justify-content-end">
          <a [href]="'https://www.facebook.com/sharer/sharer.php?u=' + shareBaseUrl + '/events/' + event.id"
            target="_blank" class="me-3 text-primary">
            <i class="bi bi-facebook text-dark"></i>
          </a>
          <a [href]="'https://twitter.com/intent/tweet?url=' + shareBaseUrl + '/events/' + event.id"
            target="_blank" class="me-3 text-info">
            <i class="bi bi-twitter-x text-dark"></i>
          </a>
          <a [href]="'https://www.linkedin.com/shareArticle?mini=true&url=' + shareBaseUrl + '/events/' + event.id"
            target="_blank" class="text-secondary">
            <i class="bi bi-linkedin text-dark"></i>
          </a>
        </div>
      </div>
    </div>
  </div>
</div>