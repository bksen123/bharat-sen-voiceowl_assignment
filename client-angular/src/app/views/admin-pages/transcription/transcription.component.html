<div class="d-flex justify-content-between align-items-center mb-3 bg-white p-3 rounded shadow-sm">
  <h4 class="mb-0 fw-bold">Transcriptions</h4>
  <!-- <div class="col-sm-10 d-flex"> -->
  <!-- <input
      class="form-control me-2"
      type="search"
      placeholder="Search by Name and Description.."
      aria-label="Search"
      [(ngModel)]="searchTranscription"
      name="searchtranscription"
      (ngModelChange)="onSearchChange($event)"
    /> -->

  <!-- </div> -->
  <button type="button" data-bs-toggle="modal" class="btn dashboard-button-bg text-nowrap pull-right"
    (click)="addEdittranscription()">
    <i class="fa fa-plus"> </i> Add new transcription
  </button>
</div>

<div style="min-height: 450px" class="bg-white">
  <table class="table">
    <thead>
      <tr>
        <th scope="col">Sr. No</th>
        <th scope="col">Audio Url</th>
        <th scope="col">transcription</th>
        <th scope="col">Source</th>
        <th scope="col">Created</th>
        <th scope="col">Action</th>
      </tr>
    </thead>
    <!-- <pre > {{transcriptionList | json}} </pre> -->
    <tbody>
      <tr class="align-middle" *ngFor="let sub of transcriptionList ; let i = index">
        <th scope="row">{{ i + 1 }}</th>
        <!-- Updated Name Column with Image -->
        <!-- <td class="align-middle">
        <div class="d-flex align-items-center gap-2">
          <img [src]="sub.logo_image" alt="member" class="rounded-circle" width="40" height="40" />
        </div>
      </td> -->
        <td class="align-middle">{{ sub.audioUrl }}</td>
        <td class="align-middle">{{ sub.transcription }}</td>
        <td class="align-middle">{{ sub.source }}</td>
        <td class="align-middle">
          {{ sub.createdAt | date : "MM/dd/YYYY" }}
        </td>
        <td class="align-middle" style="width: 100px">
          <button class="btn me-2 btn-sm view-button" (click)="confirmDelete(sub)">
            <i class="bi bi-trash"></i>
          </button>
        </td>
      </tr>
    </tbody>
  </table>
  <div *ngIf="  transcriptionList.length === 0" class="alert alert-info alert-posstion">
    No Transcription Found.
  </div>
  <!-- delete modal  -->
</div>
<pagination class="custom-pagination" [totalItems]="totalItems" [(ngModel)]="currentPage" [itemsPerPage]="itemsPerPage"
  [maxSize]="5" [boundaryLinks]="true" previousText="«" nextText="»" firstText="First" lastText="Last"
  (pageChanged)="onPageChange($event)">
</pagination>

<!-- delete transcription Modal -->

<div bsModal #deletetranscriptionModal="bs-modal" class="modal fade remove-modal-bg" tabindex="-1" role="dialog"
  aria-labelledby="myModalLabel" aria-hidden="true" [config]="{ backdrop: 'static', keyboard: false, animated: true }">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <h3 class="modal-title text-center fw-bold">Confirm Delete</h3>
        <!-- <button type="button" class="btn-close" (click)="closeModel()"></button> -->
        <span type="button" class="btn-close" (click)="closeModel()" data-bs-dismiss="modal"
          class="fa fa-remove close-modal position-absolute top-0 end-0 m-3 fs-5 cursor-pointer"></span>
      </div>
      <div class="modal-body text-center">
        <b>Are you sure you want to delete this
          <span class="text-danger">{{ newTranscription.audioUrl }}</span>
          transcription?</b>
      </div>
      <!-- <pre>{{newTranscription | json}}</pre> -->
      <div class="modal-footer">
        <button type="button" class="btn dashboard-button-bg" (click)="closeModel()">
          No
        </button>
        <button type="button" class="btn dashboard-button-bg" (click)="deleteTranscription()">
          Yes
        </button>
      </div>
    </div>
  </div>
</div>

<div bsModal #showAddEdittranscriptionModal="bs-modal" class="modal fade remove-modal-bg" tabindex="-1" role="dialog"
  aria-labelledby="myModalLabel" aria-hidden="true" [config]="{ backdrop: 'static', keyboard: false, animated: true }">
  <div class="modal-dialog modal-md" role="document">
    <div class="modal-content p-4">
      <div class="modal-header pt-0">
        <h3 class="modal-title text-center fw-bold">
          {{ newTranscription._id ? "Edit" : "Add" }} Audio Url
        </h3>
      </div>
      <div class="modal-body pb-0">
        <form #transcriptionForm="ngForm" novalidate>
          <div class="row">
            <div class="col-md-12">
              <div class="mb-3">
                <label for="audioUrl" class="form-label">Audio URL</label>
                <input type="url" id="audioUrl" [(ngModel)]="newTranscription.audioUrl" name="audioUrl"
                  class="form-control" placeholder="Please enter audio URL" required pattern="https?://.+"
                  #audioUrlCtrl="ngModel" />

                <div class="text-danger small" *ngIf="audioUrlCtrl.invalid && audioUrlCtrl.touched">
                  <div *ngIf="audioUrlCtrl.errors?.['required']">
                    Audio URL is required.
                  </div>
                  <div *ngIf="audioUrlCtrl.errors?.['pattern']">
                    Please enter a valid URL (must start with http:// or https://).
                  </div>
                </div>
              </div>

            </div>
          </div>
        </form>
      </div>
      <div class="modal-footer pb-0">
        <!-- <button type="button" class="btn btn-secondary" (click)="closeeditmodal()">
          Close
        </button> -->
        <span class="fa fa-remove closeModel close-modal position-absolute top-0 end-0 m-3 fs-5 cursor-pointer"
          (click)="closeModel()"></span>
        <button type="button" class="btn dashboard-button-bg" [disabled]="transcriptionForm.invalid"
          (click)="saveupdateTranscription()">
          {{ !newTranscription._id ? "Save" : "Update" }} Audio Url
        </button>

        <!-- <pre>{{newTranscription | json}}</pre> -->
      </div>
    </div>
  </div>
</div>