<!-- Main Container -->
<div class="d-flex flex-column vh-100">
  <!-- Fixed Header with Logo and Toggle -->
  <nav class="custom-header-navbar navbar navbar-expand-lg bg-white shadow-sm px-4">
    <!-- Logo and Toggle Button -->
    <div class="d-flex align-items-center">
      <!-- Logo -->
      <a class="custom-header-brand fw-bold text-dark d-flex align-items-center" [routerLink]="['/']">
        <img src="assets/logo/logo.svg" alt="Logo" class="header-logo" />
      </a>

      <!-- Toggle Button -->
      <button class="ps-3 header-toggle-btn me-3" (click)="toggleSidebar()">
        <i class="bi bi-list" style="font-size: 1.5rem"></i>
      </button>
    </div>

    <!-- Right-side Actions -->
    <div class="ms-auto d-flex align-items-center gap-3 custom-header-actions">
      <!-- Profile Dropdown -->
      <div class="dropdown custom-header-profile-dropdown">
        <button class="btn dropdown-toggle d-flex align-items-center gap-2 bg-white border-0" type="button"
          id="profileDropdown" data-bs-toggle="dropdown" aria-expanded="false">
          <img [src]="userDetails.photo ? userDetails.photo : 'assets/user_logo.webp'" class="rounded-circle"
            alt="Profile" width="30" height="30" />
          <span class="fw-medium text-dark d-none d-md-inline">{{userDetails.name | titlecase}}</span>
        </button>
        <ul class="dropdown-menu dropdown-menu-end shadow" aria-labelledby="profileDropdown">
          <li class="px-3 py-2 text-center">
            <img  [src]="userDetails.photo ? userDetails.photo : 'assets/user_logo.webp'" style="height: 70px; width: 70px" class="rounded-circle mb-2"
              alt="Profile" />
            <div class="fw-bold">{{this.userDetails.name | titlecase}}</div>
            <div class="text-muted" style="font-size: 12px">
              {{userDetails.email}}
            </div>
          </li>
          <li>
            <hr class="dropdown-divider" />
          </li>
          <li>
            <a class="dropdown-item text-danger theme-cursor" (click)="logout()">
              <i class="fa fa-sign-out me-2"></i>Logout
            </a>
          </li>
        </ul>
      </div>
    </div>
  </nav>

  <!-- Content Area (Sidebar + Main) -->
  <div class="d-flex flex-grow-1 overflow-hidden">
    <!-- Sidebar -->
    <div class="sidebar bg-white text-dark p-3 d-flex flex-column shadow-sm" [class.collapsed]="isCollapsed"
      [ngStyle]="{ width: isCollapsed ? '80px' : '250px' }">
      <!-- Nav Links -->
      <ul class="nav flex-column w-100 flex-grow-1  py-3">
        <li class="nav-item mb-2" *ngFor="let item of navItems">
          <a class="nav-link text-dark d-flex align-items-center gap-2" [routerLink]="item.link"
            routerLinkActive="active" [routerLinkActiveOptions]="{ exact: true }"
            [attr.title]="isCollapsed ? item.label : null">
            <i class="{{ item.icon }}"></i>
            <span *ngIf="!isCollapsed" class="label-text">{{
              item.label
              }}</span>
          </a>
        </li>
      </ul>
    </div>

    <!-- Main Content -->
    <div class="flex-grow-1 overflow-auto p-4 bg-light">
      <router-outlet></router-outlet>
      <app-loading></app-loading>
    </div>
  </div>
</div>
